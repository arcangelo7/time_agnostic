<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1402px" preserveAspectRatio="none" style="width:747px;height:1402px;background:transparent;" version="1.1" viewBox="0 0 747 1402" width="747px" zoomAndPan="magnify"><defs><filter height="300%" id="fnu01zq38jybp" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fnu01zq38jybp)" height="291.1641" style="stroke:#000000;stroke-width:2.0;" width="395.5" x="30" y="136.9609"/><rect fill="#FFFFFF" filter="url(#fnu01zq38jybp)" height="48.7031" style="stroke:#000000;stroke-width:2.0;" width="256" x="40" y="223.0156"/><rect fill="#FFFFFF" filter="url(#fnu01zq38jybp)" height="48.7031" style="stroke:#000000;stroke-width:2.0;" width="217.5" x="40" y="329.0703"/><rect fill="#FFFFFF" filter="url(#fnu01zq38jybp)" height="858.2188" style="stroke:#000000;stroke-width:2.0;" width="723.5" x="10" y="442.125"/><rect fill="#FFFFFF" filter="url(#fnu01zq38jybp)" height="541.4063" style="stroke:#000000;stroke-width:2.0;" width="627" x="96.5" y="467.4766"/><rect fill="#FFFFFF" filter="url(#fnu01zq38jybp)" height="509.0547" style="stroke:#000000;stroke-width:2.0;" width="607" x="106.5" y="492.8281"/><rect fill="#FFFFFF" filter="url(#fnu01zq38jybp)" height="61.7031" style="stroke:#000000;stroke-width:2.0;" width="227.5" x="126.5" y="650.2344"/><rect fill="#FFFFFF" filter="url(#fnu01zq38jybp)" height="209.7578" style="stroke:#000000;stroke-width:2.0;" width="551" x="116.5" y="725.9375"/><rect fill="#FFFFFF" filter="url(#fnu01zq38jybp)" height="61.7031" style="stroke:#000000;stroke-width:2.0;" width="227.5" x="126.5" y="866.9922"/><rect fill="#FFFFFF" height="59.1875" style="stroke:none;stroke-width:1.0;" width="607" x="106.5" y="942.6953"/><rect fill="#FFFFFF" filter="url(#fnu01zq38jybp)" height="227.1094" style="stroke:#000000;stroke-width:2.0;" width="373" x="20" y="1066.2344"/><rect fill="#FFFFFF" filter="url(#fnu01zq38jybp)" height="151.4063" style="stroke:#000000;stroke-width:2.0;" width="347" x="30" y="1134.9375"/><rect fill="#FFFFFF" filter="url(#fnu01zq38jybp)" height="32.3516" style="stroke:#000000;stroke-width:2.0;" width="217.5" x="40" y="1203.6406"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="67" x2="67" y1="89.6094" y2="1317.3438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="191.5" x2="191.5" y1="89.6094" y2="1317.3438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="390.5" x2="390.5" y1="89.6094" y2="1317.3438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="454.5" x2="454.5" y1="89.6094" y2="1317.3438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="530.5" x2="530.5" y1="89.6094" y2="1317.3438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="616.5" x2="616.5" y1="89.6094" y2="1317.3438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="685.5" x2="685.5" y1="89.6094" y2="1317.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="50" y="86.5332">user</text><ellipse cx="67" cy="15" fill="#FEFECE" filter="url(#fnu01zq38jybp)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M67,23 L67,50 M54,31 L80,31 M67,50 L54,65 M67,50 L80,65 " fill="none" filter="url(#fnu01zq38jybp)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="50" y="1330.877">user</text><ellipse cx="67" cy="1343.9531" fill="#FEFECE" filter="url(#fnu01zq38jybp)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M67,1351.9531 L67,1378.9531 M54,1359.9531 L80,1359.9531 M67,1378.9531 L54,1393.9531 M67,1378.9531 L80,1393.9531 " fill="none" filter="url(#fnu01zq38jybp)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#fnu01zq38jybp)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="107" x="136.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="143.5" y="74.5332">AgnosticQuery</text><rect fill="#FEFECE" filter="url(#fnu01zq38jybp)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="107" x="136.5" y="1316.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="143.5" y="1337.877">AgnosticQuery</text><rect fill="#FEFECE" filter="url(#fnu01zq38jybp)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="45" x="366.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="373.5" y="74.5332">rdflib</text><rect fill="#FEFECE" filter="url(#fnu01zq38jybp)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="45" x="366.5" y="1316.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="373.5" y="1337.877">rdflib</text><rect fill="#FEFECE" filter="url(#fnu01zq38jybp)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="55" x="425.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="432.5" y="74.5332">Sparql</text><rect fill="#FEFECE" filter="url(#fnu01zq38jybp)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="55" x="425.5" y="1316.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="432.5" y="1337.877">Sparql</text><rect fill="#FEFECE" filter="url(#fnu01zq38jybp)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="68" x="494.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="501.5" y="74.5332">datetime</text><rect fill="#FEFECE" filter="url(#fnu01zq38jybp)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="68" x="494.5" y="1316.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="501.5" y="1337.877">datetime</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="576.5" y="86.5332">provenance</text><path d="M599,36 C599,26 617,26 617,26 C617,26 635,26 635,36 L635,62 C635,72 617,72 617,72 C617,72 599,72 599,62 L599,36 " fill="#FEFECE" filter="url(#fnu01zq38jybp)" style="stroke:#000000;stroke-width:1.5;"/><path d="M599,36 C599,46 617,46 617,46 C617,46 635,46 635,36 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="576.5" y="1330.877">provenance</text><path d="M599,1343.9531 C599,1333.9531 617,1333.9531 617,1333.9531 C617,1333.9531 635,1333.9531 635,1343.9531 L635,1369.9531 C635,1379.9531 617,1379.9531 617,1379.9531 C617,1379.9531 599,1379.9531 599,1369.9531 L599,1343.9531 " fill="#FEFECE" filter="url(#fnu01zq38jybp)" style="stroke:#000000;stroke-width:1.5;"/><path d="M599,1343.9531 C599,1353.9531 617,1353.9531 617,1353.9531 C617,1353.9531 635,1353.9531 635,1343.9531 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="668.5" y="86.5332">data</text><path d="M667.5,36 C667.5,26 685.5,26 685.5,26 C685.5,26 703.5,26 703.5,36 L703.5,62 C703.5,72 685.5,72 685.5,72 C685.5,72 667.5,72 667.5,62 L667.5,36 " fill="#FEFECE" filter="url(#fnu01zq38jybp)" style="stroke:#000000;stroke-width:1.5;"/><path d="M667.5,36 C667.5,46 685.5,46 685.5,46 C685.5,46 703.5,46 703.5,36 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="668.5" y="1330.877">data</text><path d="M667.5,1343.9531 C667.5,1333.9531 685.5,1333.9531 685.5,1333.9531 C685.5,1333.9531 703.5,1333.9531 703.5,1343.9531 L703.5,1369.9531 C703.5,1379.9531 685.5,1379.9531 685.5,1379.9531 C685.5,1379.9531 667.5,1379.9531 667.5,1369.9531 L667.5,1343.9531 " fill="#FEFECE" filter="url(#fnu01zq38jybp)" style="stroke:#000000;stroke-width:1.5;"/><path d="M667.5,1343.9531 C667.5,1353.9531 685.5,1353.9531 685.5,1353.9531 C685.5,1353.9531 703.5,1353.9531 703.5,1343.9531 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><polygon fill="#A80036" points="180,117.9609,190,121.9609,180,125.9609,184,121.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="67" x2="186" y1="121.9609" y2="121.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="74" y="117.1045">AgnosticQuery()</text><path d="M30,136.9609 L181,136.9609 L181,144.9609 L171,154.9609 L30,154.9609 L30,136.9609 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="291.1641" style="stroke:#000000;stroke-width:2.0;" width="395.5" x="30" y="136.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="106" x="45" y="151.4561">_process_query()</text><polygon fill="#A80036" points="379,173.6641,389,177.6641,379,181.6641,383,177.6641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="192" x2="385" y1="177.6641" y2="177.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="199" y="172.8076">prepareQuery()</text><polygon fill="#A80036" points="203,204.0156,193,208.0156,203,212.0156,199,208.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="197" x2="390" y1="208.0156" y2="208.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="209" y="203.1592">algebra</text><path d="M40,223.0156 L101,223.0156 L101,231.0156 L91,241.0156 L40,241.0156 L40,223.0156 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="48.7031" style="stroke:#000000;stroke-width:2.0;" width="256" x="40" y="223.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="55" y="237.5107">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="175" x="116" y="236.4346">[algebra.name != "SelectQuery"]</text><polygon fill="#A80036" points="78,259.7188,68,263.7188,78,267.7188,74,263.7188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="72" x2="191" y1="263.7188" y2="263.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="84" y="258.8623">raise ValueError()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="192" x2="234" y1="301.0703" y2="301.0703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="234" x2="234" y1="301.0703" y2="314.0703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="193" x2="234" y1="314.0703" y2="314.0703"/><polygon fill="#A80036" points="203,310.0703,193,314.0703,203,318.0703,199,314.0703" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="199" y="296.2139">_tree_traverse()</text><path d="M40,329.0703 L101,329.0703 L101,337.0703 L91,347.0703 L40,347.0703 L40,329.0703 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="48.7031" style="stroke:#000000;stroke-width:2.0;" width="217.5" x="40" y="329.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="55" y="343.5654">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="126" x="116" y="342.4893">[triples_without_hook]</text><polygon fill="#A80036" points="78,365.7734,68,369.7734,78,373.7734,74,369.7734" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="72" x2="191" y1="369.7734" y2="369.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="84" y="364.917">raise ValueError()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="192" x2="234" y1="407.125" y2="407.125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="234" x2="234" y1="407.125" y2="420.125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="193" x2="234" y1="420.125" y2="420.125"/><polygon fill="#A80036" points="203,416.125,193,420.125,203,424.125,199,420.125" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="199" y="402.2686">triples</text><path d="M10,442.125 L224,442.125 L224,450.125 L214,460.125 L10,460.125 L10,442.125 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="858.2188" style="stroke:#000000;stroke-width:2.0;" width="723.5" x="10" y="442.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="169" x="25" y="456.6201">_rebuild_relevant_graphs()</text><path d="M96.5,467.4766 L169.5,467.4766 L169.5,475.4766 L159.5,485.4766 L96.5,485.4766 L96.5,467.4766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="541.4063" style="stroke:#000000;stroke-width:2.0;" width="627" x="96.5" y="467.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="111.5" y="481.9717">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="44" x="184.5" y="480.8955">[triples]</text><path d="M106.5,492.8281 L167.5,492.8281 L167.5,500.8281 L157.5,510.8281 L106.5,510.8281 L106.5,492.8281 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="509.0547" style="stroke:#000000;stroke-width:2.0;" width="607" x="106.5" y="492.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="121.5" y="507.3232">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="203" x="182.5" y="506.2471">[_is_isolated() and is_a_new_triple()]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="192" x2="234" y1="533.5313" y2="533.5313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="234" x2="234" y1="533.5313" y2="546.5313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="193" x2="234" y1="546.5313" y2="546.5313"/><polygon fill="#A80036" points="203,542.5313,193,546.5313,203,550.5313,199,546.5313" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="199" y="528.6748">_get_query_to_identify()</text><polygon fill="#A80036" points="443,572.8828,453,576.8828,443,580.8828,447,576.8828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="192" x2="449" y1="576.8828" y2="576.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="199" y="572.0264">run_construct_query()</text><polygon fill="#A80036" points="673.5,586.8828,683.5,590.8828,673.5,594.8828,677.5,590.8828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="455" x2="679.5" y1="590.8828" y2="590.8828"/><polygon fill="#A80036" points="466,600.8828,456,604.8828,466,608.8828,462,604.8828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="460" x2="684.5" y1="604.8828" y2="604.8828"/><polygon fill="#A80036" points="203,631.2344,193,635.2344,203,639.2344,199,635.2344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="197" x2="454" y1="635.2344" y2="635.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="209" y="630.3779">present_results</text><path d="M126.5,650.2344 L199.5,650.2344 L199.5,658.2344 L189.5,668.2344 L126.5,668.2344 L126.5,650.2344 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="61.7031" style="stroke:#000000;stroke-width:2.0;" width="227.5" x="126.5" y="650.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="141.5" y="664.7295">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="98" x="214.5" y="663.6533">[present_results]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="192" x2="234" y1="690.9375" y2="690.9375"/><line style="stroke:#A80036;stroke-width:1.0;" x1="234" x2="234" y1="690.9375" y2="703.9375"/><line style="stroke:#A80036;stroke-width:1.0;" x1="193" x2="234" y1="703.9375" y2="703.9375"/><polygon fill="#A80036" points="203,699.9375,193,703.9375,203,707.9375,199,703.9375" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="199" y="686.0811">_rebuild_relevant_entity()</text><path d="M116.5,725.9375 L377.5,725.9375 L377.5,733.9375 L367.5,743.9375 L116.5,743.9375 L116.5,725.9375 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="209.7578" style="stroke:#000000;stroke-width:2.0;" width="551" x="116.5" y="725.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="216" x="131.5" y="740.4326">_find_entities_in_update_queries()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="192" x2="234" y1="766.6406" y2="766.6406"/><line style="stroke:#A80036;stroke-width:1.0;" x1="234" x2="234" y1="766.6406" y2="779.6406"/><line style="stroke:#A80036;stroke-width:1.0;" x1="193" x2="234" y1="779.6406" y2="779.6406"/><polygon fill="#A80036" points="203,775.6406,193,779.6406,203,783.6406,199,779.6406" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="199" y="761.7842">_get_query_to_update_queries()</text><polygon fill="#A80036" points="443,789.6406,453,793.6406,443,797.6406,447,793.6406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="192" x2="449" y1="793.6406" y2="793.6406"/><polygon fill="#A80036" points="605,803.6406,615,807.6406,605,811.6406,609,807.6406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="455" x2="611" y1="807.6406" y2="807.6406"/><polygon fill="#A80036" points="466,817.6406,456,821.6406,466,825.6406,462,821.6406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="460" x2="616" y1="821.6406" y2="821.6406"/><polygon fill="#A80036" points="203,847.9922,193,851.9922,203,855.9922,199,851.9922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="197" x2="454" y1="851.9922" y2="851.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="209" y="847.1357">results</text><path d="M126.5,866.9922 L199.5,866.9922 L199.5,874.9922 L189.5,884.9922 L126.5,884.9922 L126.5,866.9922 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="61.7031" style="stroke:#000000;stroke-width:2.0;" width="227.5" x="126.5" y="866.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="141.5" y="881.4873">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="48" x="214.5" y="880.4111">[results]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="192" x2="234" y1="907.6953" y2="907.6953"/><line style="stroke:#A80036;stroke-width:1.0;" x1="234" x2="234" y1="907.6953" y2="920.6953"/><line style="stroke:#A80036;stroke-width:1.0;" x1="193" x2="234" y1="920.6953" y2="920.6953"/><polygon fill="#A80036" points="203,916.6953,193,920.6953,203,924.6953,199,920.6953" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="199" y="902.8389">_rebuild_relevant_entity()</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="106.5" x2="713.5" y1="943.6953" y2="943.6953"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="224" x="111.5" y="955.1143">[not _is_isolated() and is_a_new_triple()]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="192" x2="234" y1="980.8828" y2="980.8828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="234" x2="234" y1="980.8828" y2="993.8828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="193" x2="234" y1="993.8828" y2="993.8828"/><polygon fill="#A80036" points="203,989.8828,193,993.8828,203,997.8828,199,993.8828" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="199" y="976.0264">_rebuild_relevant_entity()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="192" x2="234" y1="1038.2344" y2="1038.2344"/><line style="stroke:#A80036;stroke-width:1.0;" x1="234" x2="234" y1="1038.2344" y2="1051.2344"/><line style="stroke:#A80036;stroke-width:1.0;" x1="193" x2="234" y1="1051.2344" y2="1051.2344"/><polygon fill="#A80036" points="203,1047.2344,193,1051.2344,203,1055.2344,199,1051.2344" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="199" y="1033.3779">_align_snapshots()</text><path d="M20,1066.2344 L178,1066.2344 L178,1074.2344 L168,1084.2344 L20,1084.2344 L20,1066.2344 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="227.1094" style="stroke:#000000;stroke-width:2.0;" width="373" x="20" y="1066.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="113" x="35" y="1080.7295">_solve_variables()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="192" x2="234" y1="1106.9375" y2="1106.9375"/><line style="stroke:#A80036;stroke-width:1.0;" x1="234" x2="234" y1="1106.9375" y2="1119.9375"/><line style="stroke:#A80036;stroke-width:1.0;" x1="193" x2="234" y1="1119.9375" y2="1119.9375"/><polygon fill="#A80036" points="203,1115.9375,193,1119.9375,203,1123.9375,199,1119.9375" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="199" y="1102.0811">_get_vars_to_explicit_by_time()</text><path d="M30,1134.9375 L103,1134.9375 L103,1142.9375 L93,1152.9375 L30,1152.9375 L30,1134.9375 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="151.4063" style="stroke:#000000;stroke-width:2.0;" width="347" x="30" y="1134.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="45" y="1149.4326">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="132" x="118" y="1148.3564">[_there_are_variables()]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="192" x2="234" y1="1175.6406" y2="1175.6406"/><line style="stroke:#A80036;stroke-width:1.0;" x1="234" x2="234" y1="1175.6406" y2="1188.6406"/><line style="stroke:#A80036;stroke-width:1.0;" x1="193" x2="234" y1="1188.6406" y2="1188.6406"/><polygon fill="#A80036" points="203,1184.6406,193,1188.6406,203,1192.6406,199,1188.6406" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="199" y="1170.7842">_explicit_solvable_variables()</text><path d="M40,1203.6406 L101,1203.6406 L101,1211.6406 L91,1221.6406 L40,1221.6406 L40,1203.6406 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="32.3516" style="stroke:#000000;stroke-width:2.0;" width="217.5" x="40" y="1203.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="55" y="1218.1357">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="119" x="116" y="1217.0596">[not solved variables]</text><polygon fill="#A80036" points="78,1223.9922,68,1227.9922,78,1231.9922,74,1227.9922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="72" x2="191" y1="1227.9922" y2="1227.9922"/><line style="stroke:#A80036;stroke-width:1.0;" x1="192" x2="234" y1="1265.3438" y2="1265.3438"/><line style="stroke:#A80036;stroke-width:1.0;" x1="234" x2="234" y1="1265.3438" y2="1278.3438"/><line style="stroke:#A80036;stroke-width:1.0;" x1="193" x2="234" y1="1278.3438" y2="1278.3438"/><polygon fill="#A80036" points="203,1274.3438,193,1278.3438,203,1282.3438,199,1278.3438" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="199" y="1260.4873">_update_vars_to_explicit()</text><!--MD5=[47984c362292cfaa616f993754231f54]
@startuml
actor user
participant AgnosticQuery
participant rdflib
participant Sparql 
participant datetime
database provenance
database data

user -> AgnosticQuery: AgnosticQuery()
group _process_query()
    AgnosticQuery -> rdflib: prepareQuery()
    rdflib -> AgnosticQuery: algebra
    alt algebra.name != "SelectQuery"
        AgnosticQuery -> user: raise ValueError()            
    end
    AgnosticQuery -> AgnosticQuery: _tree_traverse()
    alt triples_without_hook
        AgnosticQuery -> user: raise ValueError()            
    end
    AgnosticQuery -> AgnosticQuery: triples
end
group _rebuild_relevant_graphs()
    loop triples
        alt _is_isolated() and is_a_new_triple()
            AgnosticQuery -> AgnosticQuery: _get_query_to_identify()
            AgnosticQuery -> Sparql: run_construct_query()
            Sparql - -> data
            return
            Sparql -> AgnosticQuery: present_results
            loop present_results
                AgnosticQuery -> AgnosticQuery: _rebuild_relevant_entity()
            end
            group _find_entities_in_update_queries()
                AgnosticQuery -> AgnosticQuery: _get_query_to_update_queries()
                AgnosticQuery - -> Sparql
                Sparql - -> provenance
                return
                Sparql -> AgnosticQuery: results
                loop results
                    AgnosticQuery -> AgnosticQuery: _rebuild_relevant_entity()
                end
            end
        else not _is_isolated() and is_a_new_triple()
            AgnosticQuery -> AgnosticQuery: _rebuild_relevant_entity()
        end
    end
AgnosticQuery -> AgnosticQuery: _align_snapshots()
group _solve_variables()
    AgnosticQuery -> AgnosticQuery: _get_vars_to_explicit_by_time()
    loop _there_are_variables()
        AgnosticQuery -> AgnosticQuery: _explicit_solvable_variables()
        alt not solved variables
            AgnosticQuery - -> user                
        end
        AgnosticQuery -> AgnosticQuery: _update_vars_to_explicit()
    end
end

end
@enduml

PlantUML version 1.2021.7(Sun May 23 14:40:07 CEST 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: it
Country: IT
--></g></svg>