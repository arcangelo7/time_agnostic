<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="830px" preserveAspectRatio="none" style="width:809px;height:830px;background:transparent;" version="1.1" viewBox="0 0 809 830" width="809px" zoomAndPan="magnify"><defs><filter height="300%" id="f1en7hb97e17zm" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1en7hb97e17zm)" height="48.7031" style="stroke:#000000;stroke-width:2.0;" width="411.5" x="10" y="242.0156"/><rect fill="#FFFFFF" filter="url(#f1en7hb97e17zm)" height="105.0547" style="stroke:#000000;stroke-width:2.0;" width="238.5" x="294.5" y="513.8281"/><rect fill="#FFFFFF" filter="url(#f1en7hb97e17zm)" height="94.8906" style="stroke:#000000;stroke-width:2.0;" width="411.5" x="10" y="632.8828"/><rect fill="#FFFFFF" height="46.1875" style="stroke:none;stroke-width:1.0;" width="411.5" x="10" y="681.5859"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="37" x2="37" y1="89.6094" y2="744.7734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="357.5" x2="357.5" y1="89.6094" y2="744.7734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="553.5" x2="553.5" y1="89.6094" y2="744.7734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="629.5" x2="629.5" y1="89.6094" y2="744.7734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="715.5" x2="715.5" y1="89.6094" y2="744.7734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="784.5" x2="784.5" y1="89.6094" y2="744.7734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="20" y="86.5332">user</text><ellipse cx="37" cy="15" fill="#FEFECE" filter="url(#f1en7hb97e17zm)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M37,23 L37,50 M24,31 L50,31 M37,50 L24,65 M37,50 L50,65 " fill="none" filter="url(#f1en7hb97e17zm)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="20" y="758.3066">user</text><ellipse cx="37" cy="771.3828" fill="#FEFECE" filter="url(#f1en7hb97e17zm)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M37,779.3828 L37,806.3828 M24,787.3828 L50,787.3828 M37,806.3828 L24,821.3828 M37,806.3828 L50,821.3828 " fill="none" filter="url(#f1en7hb97e17zm)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1en7hb97e17zm)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="103" x="304.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="311.5" y="74.5332">AgnosticEntity</text><rect fill="#FEFECE" filter="url(#f1en7hb97e17zm)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="103" x="304.5" y="743.7734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="311.5" y="765.3066">AgnosticEntity</text><rect fill="#FEFECE" filter="url(#f1en7hb97e17zm)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="55" x="524.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="531.5" y="74.5332">Sparql</text><rect fill="#FEFECE" filter="url(#f1en7hb97e17zm)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="55" x="524.5" y="743.7734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="531.5" y="765.3066">Sparql</text><rect fill="#FEFECE" filter="url(#f1en7hb97e17zm)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="68" x="593.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="600.5" y="74.5332">datetime</text><rect fill="#FEFECE" filter="url(#f1en7hb97e17zm)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="68" x="593.5" y="743.7734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="600.5" y="765.3066">datetime</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="675.5" y="86.5332">provenance</text><path d="M698,36 C698,26 716,26 716,26 C716,26 734,26 734,36 L734,62 C734,72 716,72 716,72 C716,72 698,72 698,62 L698,36 " fill="#FEFECE" filter="url(#f1en7hb97e17zm)" style="stroke:#000000;stroke-width:1.5;"/><path d="M698,36 C698,46 716,46 716,46 C716,46 734,46 734,36 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="675.5" y="758.3066">provenance</text><path d="M698,771.3828 C698,761.3828 716,761.3828 716,761.3828 C716,761.3828 734,761.3828 734,771.3828 L734,797.3828 C734,807.3828 716,807.3828 716,807.3828 C716,807.3828 698,807.3828 698,797.3828 L698,771.3828 " fill="#FEFECE" filter="url(#f1en7hb97e17zm)" style="stroke:#000000;stroke-width:1.5;"/><path d="M698,771.3828 C698,781.3828 716,781.3828 716,781.3828 C716,781.3828 734,781.3828 734,771.3828 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="767.5" y="86.5332">data</text><path d="M766.5,36 C766.5,26 784.5,26 784.5,26 C784.5,26 802.5,26 802.5,36 L802.5,62 C802.5,72 784.5,72 784.5,72 C784.5,72 766.5,72 766.5,62 L766.5,36 " fill="#FEFECE" filter="url(#f1en7hb97e17zm)" style="stroke:#000000;stroke-width:1.5;"/><path d="M766.5,36 C766.5,46 784.5,46 784.5,46 C784.5,46 802.5,46 802.5,36 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="767.5" y="758.3066">data</text><path d="M766.5,771.3828 C766.5,761.3828 784.5,761.3828 784.5,761.3828 C784.5,761.3828 802.5,761.3828 802.5,771.3828 L802.5,797.3828 C802.5,807.3828 784.5,807.3828 784.5,807.3828 C784.5,807.3828 766.5,807.3828 766.5,797.3828 L766.5,771.3828 " fill="#FEFECE" filter="url(#f1en7hb97e17zm)" style="stroke:#000000;stroke-width:1.5;"/><path d="M766.5,771.3828 C766.5,781.3828 784.5,781.3828 784.5,781.3828 C784.5,781.3828 802.5,781.3828 802.5,771.3828 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><polygon fill="#A80036" points="346,117.9609,356,121.9609,346,125.9609,350,121.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="37" x2="352" y1="121.9609" y2="121.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="44" y="117.1045">get_state_at_time()</text><polygon fill="#A80036" points="542,148.3125,552,152.3125,542,156.3125,546,152.3125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="358" x2="548" y1="152.3125" y2="152.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="365" y="147.4561">query_snapshots</text><polygon fill="#A80036" points="704,178.6641,714,182.6641,704,186.6641,708,182.6641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="554" x2="710" y1="182.6641" y2="182.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="561" y="177.8076">run_select_query()</text><polygon fill="#A80036" points="565,192.6641,555,196.6641,565,200.6641,561,196.6641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="559" x2="715" y1="196.6641" y2="196.6641"/><polygon fill="#A80036" points="369,223.0156,359,227.0156,369,231.0156,365,227.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="363" x2="553" y1="227.0156" y2="227.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="375" y="222.1592">results</text><path d="M10,242.0156 L71,242.0156 L71,250.0156 L61,260.0156 L10,260.0156 L10,242.0156 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="48.7031" style="stroke:#000000;stroke-width:2.0;" width="411.5" x="10" y="242.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="256.5107">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="69" x="86" y="255.4346">[not results]</text><polygon fill="#A80036" points="48,278.7188,38,282.7188,48,286.7188,44,282.7188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="42" x2="357" y1="282.7188" y2="282.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="54" y="277.8623">(None, None, None)</text><polygon fill="#A80036" points="617.5,316.0703,627.5,320.0703,617.5,324.0703,621.5,320.0703" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="358" x2="623.5" y1="320.0703" y2="320.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="365" y="315.2139">_convert_to_datetime()</text><polygon fill="#A80036" points="369,346.4219,359,350.4219,369,354.4219,365,350.4219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="363" x2="628.5" y1="350.4219" y2="350.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="375" y="345.5654">results sorted by time</text><line style="stroke:#A80036;stroke-width:1.0;" x1="358" x2="400" y1="380.7734" y2="380.7734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="400" x2="400" y1="380.7734" y2="393.7734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="359" x2="400" y1="393.7734" y2="393.7734"/><polygon fill="#A80036" points="369,389.7734,359,393.7734,369,397.7734,365,393.7734" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="365" y="375.917">_filter_timestamps_by_interval()</text><polygon fill="#A80036" points="542,420.125,552,424.125,542,428.125,546,424.125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="358" x2="548" y1="424.125" y2="424.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="365" y="419.2686">query_dataset</text><polygon fill="#A80036" points="772.5,450.4766,782.5,454.4766,772.5,458.4766,776.5,454.4766" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="554" x2="778.5" y1="454.4766" y2="454.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="561" y="449.6201">_query_dataset()</text><polygon fill="#A80036" points="565,464.4766,555,468.4766,565,472.4766,561,468.4766" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="559" x2="783.5" y1="468.4766" y2="468.4766"/><polygon fill="#A80036" points="369,494.8281,359,498.8281,369,502.8281,365,498.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="363" x2="553" y1="498.8281" y2="498.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="375" y="493.9717">entity_cg</text><path d="M294.5,513.8281 L367.5,513.8281 L367.5,521.8281 L357.5,531.8281 L294.5,531.8281 L294.5,513.8281 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="105.0547" style="stroke:#000000;stroke-width:2.0;" width="238.5" x="294.5" y="513.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="309.5" y="528.3232">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="99" x="382.5" y="527.2471">[relevant_results]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="358" x2="400" y1="554.5313" y2="554.5313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="400" x2="400" y1="554.5313" y2="567.5313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="359" x2="400" y1="567.5313" y2="567.5313"/><polygon fill="#A80036" points="369,563.5313,359,567.5313,369,571.5313,365,567.5313" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="365" y="549.6748">sum_update_queries</text><line style="stroke:#A80036;stroke-width:1.0;" x1="358" x2="400" y1="597.8828" y2="597.8828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="400" x2="400" y1="597.8828" y2="610.8828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="359" x2="400" y1="610.8828" y2="610.8828"/><polygon fill="#A80036" points="369,606.8828,359,610.8828,369,614.8828,365,610.8828" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="365" y="593.0264">_manage_update_queries()</text><path d="M10,632.8828 L71,632.8828 L71,640.8828 L61,650.8828 L10,650.8828 L10,632.8828 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="94.8906" style="stroke:#000000;stroke-width:2.0;" width="411.5" x="10" y="632.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="647.3779">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="136" x="86" y="646.3018">[include_prov_metadata]</text><polygon fill="#A80036" points="48,669.5859,38,673.5859,48,677.5859,44,673.5859" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="42" x2="357" y1="673.5859" y2="673.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="297" x="54" y="668.7295">(entity_graphs, entity_snapshots, other_snapshots)</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="421.5" y1="682.5859" y2="682.5859"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="157" x="15" y="694.0049">[not include_prov_metadata]</text><polygon fill="#A80036" points="48,715.7734,38,719.7734,48,723.7734,44,719.7734" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="42" x2="357" y1="719.7734" y2="719.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="54" y="714.917">(entity_graphs, entity_snapshots, None)</text><!--MD5=[ed6b483d6ae1d00489fc4ee40bc8abf3]
@startuml
actor user
participant AgnosticEntity 
participant Sparql
participant datetime
database provenance
database data
user -> AgnosticEntity: get_state_at_time()
AgnosticEntity -> Sparql: query_snapshots
    Sparql -> provenance: run_select_query()
    return
Sparql -> AgnosticEntity: results
alt not results
    AgnosticEntity -> user: (None, None, None)    
end
AgnosticEntity -> datetime: _convert_to_datetime()
datetime - -> AgnosticEntity: results sorted by time
AgnosticEntity -> AgnosticEntity: _filter_timestamps_by_interval()
AgnosticEntity -> Sparql: query_dataset
Sparql -> data: _query_dataset()
return
Sparql -> AgnosticEntity: entity_cg
loop relevant_results
    AgnosticEntity -> AgnosticEntity: sum_update_queries
    AgnosticEntity -> AgnosticEntity: _manage_update_queries()
end
alt include_prov_metadata
    AgnosticEntity -> user: (entity_graphs, entity_snapshots, other_snapshots)
else not include_prov_metadata
    AgnosticEntity -> user: (entity_graphs, entity_snapshots, None)
end
@enduml

PlantUML version 1.2021.7(Sun May 23 14:40:07 CEST 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: it
Country: IT
--></g></svg>